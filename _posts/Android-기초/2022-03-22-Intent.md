---
layout: post
title: "Android: Intent"
date: 2022-03-22
excerpt: "Android"
comments: true
categories : Android-κΈ°μ΄
---

# Intent?
- μ»΄ν¬λ„νΈλ¥Ό μ‹¤ν–‰ν•κΈ° μ„ν•΄ μ‹ν…μ— μ „λ‹¬ν•λ” λ©”μ‹μ§€
    - μ¦‰, λ°μ΄ν„°λ¥Ό λ‹΄λ” ν΄λμ¤
- μ»΄ν¬λ„νΈλ” κ°λ°μκ°€ μ§μ ‘ μƒμ„±ν•κ³  κ΄€λ¦¬ν•κ³  νκ΄΄ν•  μ μ—†λ‹¤.
    - μ¦‰, μ½”λ“λ΅ μƒλ…μ£ΌκΈ°λ¥Ό κ΄€λ¦¬ ν• μ μ—†λ‹¤.
- κ·Έλμ„ μƒλ΅μ΄ μ»΄ν¬λ„νΈλ¥Ό μƒμ„±ν•κΈ° μ„ν•΄ μ°λ¦¬λ” μ‹μ¤ν…μ— μ •λ³΄λ¥Ό μ „λ‹¬ν•μ—¬ μ‹μ¤ν…μ— μƒλ…μ£ΌκΈ°λ¥Ό λ§΅κΈ°κ² λλ‹¤.
    - μ΄λ•, μ‹μ¤ν…μ—κ² μ •λ³΄λ¥Ό μ „λ‹¬ν•  μ μλ” λ§¤κ°μ²΄κ°€ μΈν…νΈμ΄λ‹¤.
    - μ‹μ¤ν…μ€ μΈν…νΈμ μ •λ³΄λ¥Ό λ¶„μ„ν•΄μ„ κ·Έμ— λ§λ” μ»΄ν¬λ„νΈλ¥Ό μ‹¤ν–‰ν•΄ μ¤€λ‹¤.
- μ•μ„ [startActivity()](./2022-03-22-Activity.md#π―-startactivity)μ—μ„ μΈν…νΈλ¥Ό λ‹΄μ•„ μ „λ‹¬ν•  λ•
    - Intent μƒμ„±μμ— μƒμ„±ν•  μ»΄ν¬λ„νΈμ ν΄λμ¤ λ νΌλ°μ¤ μ •λ³΄λ¥Ό λ‹΄μ•„ μ‹μ¤ν…μ— ν•΄λ‹Ή μ»΄ν¬λ„νΈλ¥Ό μ‹¤ν–‰ν•΄ λ‹¬λΌλ” μ •λ³΄λ¥Ό λ‹΄μ•„μ„ startActvityλ¥Ό ν†µν•΄ μ „λ‹¬ν•λ” κ²ƒμ΄λ‹¤.

## Intent Extra Data
- κ°λ°μκ°€ μƒλ΅μ΄ μ»΄ν¬λ„νΈμ— λ°μ΄ν„°λ¥Ό λ„κΈΈ λ• μΈν…νΈμ— λ°μ΄ν„°λ¥Ό λ‹΄μ•„μ„ μ‹μ¤ν…μ— κ°™μ΄ μ „λ‹¬ν•λ‹¤.
    - μ΄λ•, κ°λ°μκ°€ μ΄ μΈν…νΈμ— λ‹΄λ” λ°μ΄ν„°λ” λ¶€κ°€ μ •λ³΄μ΄κ³  μ΄λ¥Ό μ—‘μ¤νΈλΌ λ°μ΄ν„°λΌ ν•λ‹¤.
- putExtraλ¥Ό ν†µν•΄μ„ λ°μ΄ν„°λ¥Ό λ‹΄κ³  μ „λ‹¬ν•λ‹¤.
    - νλΌλ―Έν„° κ°’μ€ keyμ™€ valueμ΄λ©°, keyλ” stringμΌλ΅ μ „λ‹¬ν•λ‹¤.
- μ΄λ¥Ό ν†µν•΄ λ°›μ„ λ• getExtraλ¥Ό ν†µν•΄ λ°›λ”λ‹¤. λν• λ‹¤μ–‘ν• νƒ€μ…λ³„λ΅ λ°μ΄ν„°λ¥Ό λ°›μ„ μ μλ‹¤.
    - getIntExtra
    - getStringExtra
    - getDoubleExtra
    - ...

## π― Intent filter
- intentλ” μ‹¤ν–‰ν•  μ»΄ν¬λ„νΈ μ •λ³΄ μ„¤μ • λ°©λ²•μ— λ”°λΌ 2κ°€μ§€λ΅ λ¶„λ¥λ¨
    - λ…μ‹μ  μΈν…νΈ
        - ν΄λμ¤ νƒ€μ… λ νΌλ°μ¤ μ •λ³΄λ¥Ό ν™μ©ν• μΈν…νΈ
    - μ•”μ‹μ  μΈν…νΈ
        - μΈν…νΈ ν•„ν„° μ •λ³΄λ¥Ό ν™μ©ν• μΈν…νΈ
### λ…μ‹μ  μΈν…νΈ
- μΌλ°μ μΌλ΅ λ‚΄λ¶€ μ•±μ μ»΄ν¬ν„΄νΈλ¥Ό μ”μ²­ν•λ” μΈν…νΈ κ°μ²΄λ¥Ό λ§λ“¤ λ• μ‚¬μ©
    
### μ•”μ‹μ  μΈν…νΈ
- μ™Έλ¶€ μ•±μ μ»΄ν¬λ„νΈμ κ²½μ° λ‚΄λ¶€ ν΄λμ¤ λ…μ„ μ• μ μ—†μ
    - λ”°λΌμ„, μΈν…νΈ ν•„ν„° μ •λ³΄λ¥Ό μ΄μ©ν• μ•”μ‹μ  μΈν…νΈλ¥Ό ν™μ©ν•¨
- μ΄λ” manifest μ„¤μ • νμΌμ— μ„ μ–Έλ μΈν…νΈ ν•„ν„°λ¥Ό μ΄μ©ν•¨

### intent filter tag
- action: μ»΄ν¬λ„νΈμ κΈ°λ¥μ„ λ‚νƒ€λ‚΄λ” λ¬Έμμ—΄
    - name
        - μ΄λ” μ μΌν•  ν•„μ”λ” μ—†μΌλ‚ μ»΄ν¬λ„νΈμ κΈ°λ¥μ„ λ‚νƒ€λ‚Ό κ²ƒμ„ κ¶μ¥ν•¨
- category: μ»΄ν¬λ„νΈκ°€ ν¬ν•¨λλ” λ²”μ£Όλ¥Ό λ‚νƒ€λ‚΄λ” λ¬Έμμ—΄
    - name
        - μ—¬κΈ°μ— λ²”μ£Όλ¥Ό κΈ°μ¬ν•¨
        - κ°λ°μκ°€ μ„μ μ§€μ •μ„ ν•  μ μμΌλ‚ ν”λ«νΌ APIμ—μ„ μ κ³µν•λ” λ¬Έμμ—΄ μ‚¬μ©
            - ex) android.intent.category.LAUNCHER
- data: μ»΄ν¬λ„νΈμ— ν•„μ”ν• λ°μ΄ν„° μ •λ³΄
    - μ»΄ν¬λ„νΈμ—μ„ μ–΄λ–¤ μ„±κ²©μ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•λ”μ§€ λ‚νƒ€λƒ„
    - μ—¬λ¬ μ†μ„±μ΄ μμΌλ©° ν•„μ”ν•λ§νΌ μ΄μ©κ°€λ¥

- intent λ“±λ΅ μμ 
    ```xml
    <activity android:name=".TwoActivity">
        <intent-filter>
            <action android:name="ACTION_EDIT" />
            <category android:name="android.intent.category.DEFAULT"/ >
            <data android:scheme="http" />
        </intent-filter>
    </activity>
    ```
- intent ν”„λ΅νΌν‹° μ΄μ© μμ 
    ```kotlin
    val intent = Intent()
    intent.action = "ACTION_EDIT"
    intent.data = Uri.parse("http://www.google.com")
    startActivity(intent)
    ```


## π― Intentλ¥Ό ν†µν•΄ κ°μ²΄ μ „λ‹¬
objectλ¥Ό μ§λ ¬ν™” ν•μ—¬ intentλ΅ μ „λ‹¬ν•λ‹¤.
1. Serializable
    - data class
        ```kotlin
        data class Object: Serializable {
            ...
        }
        ```
    - input intent
        ```kotlin
        val intent = Intent()
        intent.putExtra("serial", object)
        ```
    - get object
        ```kotlin
        obj: Object = intent.getSerializableExtra("serial")
        ```
2. Parcelable
    - data class
        ```kotlin
        data class object: Parcelable {
            ...
            override fun describeContents(): Int {
                return 0;
            }
            override fun writeToParcel(dest: Parcel,flags: Int) { }
        }
        ```
    - input intent
        ```kotlin
        val intent = Intent()
        intent.putExtra("parcel", object)
        ```
    - get object
        ```kotlin
        obj: Object = intent.getParcelableExtra("parcel")
        ```
> μ§λ ¬ν™”λ” JVMμ λ©”λ¨λ¦¬μ—λ§ μƒμ£Όλμ–΄ μλ” κ°μ²΄ λ°μ΄ν„°λ¥Ό κ·Έλ€λ΅ μμ†ν™”(persist)κ°€ ν•„μ”ν•  λ• μ‚¬μ©λλ‹¤.<br/>
> μ¦‰, intentμ— λ‹΄μ•„ μ‹μ¤ν…μ— μ „λ‹¬ν•  λ•κΉμ§€ jvmμ λ©”λ¨λ¦¬μ— λ°μ΄ν„°λ¥Ό μ΅΄μ¬ν•κ² ν•κ³ , μ΄λ¥Ό κ·Έλ€λ΅ λ‹¤μ μ»΄ν¬λ„νΈμ— μ „λ‹¬ν•λ” κ²ƒμ΄ λ©μ μ΄λ‹¤.

- μ¶”κ°€μ μΈ μ•„μ΄λ””μ–΄
    1. data classμ κ²½μ° toString() λ©”μ†λ“λ¥Ό ν†µν•΄ λ¬Έμμ—΄λ΅ λ³€ν™ ν›„ getStringExtraλ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό λ°›λ”λ‹¤.
        - λ°›μ€ ν›„ λ°μ΄ν„° νμ‹±μ„ ν†µν•΄ κ°μ²΄ λ³€ν™μ„ μν–‰ν•λ‹¤.
    2. Gsonμ„ ν™μ©
        - λ„¤νΈμ›ν¬ ν†µμ‹ ν•  λ• μ‚¬μ©ν•λ” λΌμ΄λΈλ¬λ¦¬
        - μ΄λ” java objectμ μ§λ ¬ν™”μ™€ μ—­μ§λ ¬ν™”λ¥Ό μν–‰ν•΄μ£Όμ–΄ νΈν•κ² λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•  μ μλ‹¤.
        - data class
            ```kotlin
            data class Object{
                ...
            }
            ```
        - input intent
            ```kotlin
            val intent = Intent()
            myJson: String = gson.toJson(object);
            intent.putExtra("myjson", myjson);
            ```
        - get object
            ```kotlin
            val object = gson.fromJson<Object>(intent.getStringExtra("identifier"), Object::class.java)
            ```